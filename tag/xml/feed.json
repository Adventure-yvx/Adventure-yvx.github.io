{
    "version": "https://jsonfeed.org/version/1",
    "title": "null • All posts by \"xml\" tag",
    "description": "",
    "home_page_url": "https://adventure-yx.github.io",
    "items": [
        {
            "id": "https://adventure-yx.github.io/2023/05/29/XML/",
            "url": "https://adventure-yx.github.io/2023/05/29/XML/",
            "title": "XML & TinyXML",
            "date_published": "2023-05-29T02:15:50.000Z",
            "content_html": "<h1 id=\"xml\"><a class=\"markdownIt-Anchor\" href=\"#xml\">#</a> XML</h1>\n<h2 id=\"xml简介\"><a class=\"markdownIt-Anchor\" href=\"#xml简介\">#</a> XML 简介</h2>\n<p>XML 被设计用来传输和存储数据。</p>\n<p>HTML 被设计用来显示数据。</p>\n<p>XML 指可扩展标记语言（eXtensible Markup Language）。</p>\n<p>可扩展标记语言（英语：Extensible Markup Language，简称：XML）是一种标记语言，是从标准通用标记语言（SGML）中简化修改出来的。</p>\n<ul>\n<li>\n<p>什么是 XML？</p>\n<ul>\n<li>XML 指可扩展标记语言（EXtensible Markup Language）。</li>\n<li>XML 是一种很像 HTML 的标记语言。</li>\n<li>XML 的设计宗旨是传输数据，而不是显示数据。</li>\n<li>XML 标签没有被预定义。您需要自行定义标签。</li>\n<li>XML 被设计为具有自我描述性。</li>\n<li>XML 是 W3C 的推荐标准。</li>\n</ul>\n</li>\n<li>\n<p>XML 和 HTML 之间的差异</p>\n<p>XML 不是 HTML 的替代。</p>\n<p>XML 和 HTML 为不同的目的而设计：</p>\n<ul>\n<li>XML 被设计用来传输和存储数据，其焦点是数据的内容。</li>\n<li>HTML 被设计用来显示数据，其焦点是数据的外观。</li>\n</ul>\n<p>HTML 旨在显示信息，而 XML 旨在传输信息。</p>\n</li>\n<li>\n<p>XML 不会做任何事情</p>\n<p>也许这有点难以理解，但是 XML 不会做任何事情。XML 被设计用来结构化、存储以及传输信息。</p>\n</li>\n<li>\n<p>通过 XML 您可以发明自己的标签</p>\n</li>\n<li>\n<p>XML 不是对 HTML 的替代</p>\n<p><strong>XML 是对 HTML 的补充。</strong></p>\n<p>XML 不会替代 HTML，理解这一点很重要。在大多数 Web 应用程序中，XML 用于传输数据，而 HTML 用于格式化并显示数据。</p>\n<p>对 XML 最好的描述是：</p>\n<p><strong>XML 是独立于软件和硬件的信息传输工具。</strong></p>\n</li>\n<li>\n<p>XML 无所不在</p>\n<p>目前，XML 在 Web 中起到的作用不会亚于一直作为 Web 基石的 HTML。</p>\n<p>XML 是各种应用程序之间进行数据传输的最常用的工具。</p>\n</li>\n</ul>\n<h2 id=\"xml用途\"><a class=\"markdownIt-Anchor\" href=\"#xml用途\">#</a> XML 用途</h2>\n<p>XML 应用于 Web 开发的许多方面，常用于简化数据的存储和共享。</p>\n<ul>\n<li>\n<p><strong>XML 把数据从 HTML 分离</strong></p>\n<p>如果需要在 HTML 文档中显示动态数据，那么每当数据改变时将花费大量的时间来编辑 HTML。</p>\n<p>通过 XML，数据能够存储在独立的 XML 文件中。这样就可以专注于使用 HTML/CSS 进行显示和布局，并确保修改底层数据不再需要对 HTML 进行任何的改变。</p>\n<p>通过使用几行 JavaScript 代码，就可以读取一个外部 XML 文件，并更新网页的数据内容。</p>\n</li>\n<li>\n<p><strong>XML 简化数据共享</strong></p>\n<p>在真实的世界中，计算机系统和数据使用不兼容的格式来存储数据。</p>\n<p>XML 数据以纯文本格式进行存储，因此提供了一种独立于软件和硬件的数据存储方法。</p>\n<p>这让创建不同应用程序可以共享的数据变得更加容易。</p>\n</li>\n<li>\n<p><strong>XML 简化数据传输</strong></p>\n<p>对开发人员来说，其中一项最费时的挑战<strong>一直是在互联网上的不兼容系统之间交换数据。</strong></p>\n<p>由于可以通过各种不兼容的应用程序来读取数据，以 XML 交换数据降低了这种复杂性。</p>\n</li>\n<li>\n<p><strong>XML 简化平台变更</strong></p>\n<p>升级到新的系统（硬件或软件平台），总是非常费时的。必须转换大量的数据，不兼容的数据经常会丢失。</p>\n<p>XML 数据以文本格式存储。这使得 XML 在不损失数据的情况下，更容易扩展或升级到新的操作系统、新的应用程序或新的浏览器。</p>\n</li>\n</ul>\n<h2 id=\"xml语法\"><a class=\"markdownIt-Anchor\" href=\"#xml语法\">#</a> XML 语法</h2>\n<ul>\n<li>\n<p><strong>XML 文档必须有根元素</strong></p>\n<p>XML 必须包含根元素，它是所有其他元素的父元素</p>\n</li>\n<li>\n<p><strong>XML 声明</strong></p>\n<p>XML 声明文件的可选部分，如果存在需要放在文档的第一行，如下所示：</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"><span>p</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span>xml version<span class=\"token operator\">=</span><span class=\"token string\">\"1.0\"</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token operator\">?</span><span class=\"token operator\">></span></pre></td></tr></table></figure><blockquote>\n<p>以上实例包含 XML 版本</p>\n<p>UTF-8 也是 HTML5, CSS, JavaScript, PHP, 和 SQL 的默认编码。</p>\n</blockquote>\n</li>\n<li>\n<p><strong>所有的 XML 元素都必须有一个关闭标签</strong></p>\n<p>在 HTML 中，某些元素不必有一个关闭标签：</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>This is a paragraph.</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>在 XML 中，省略关闭标签是非法的。所有元素都<strong>必须</strong>有关闭标签：</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>This is a paragraph.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span></pre></td></tr></table></figure></li>\n<li>\n<p><strong>XML 标签对大小写敏感</strong></p>\n<p>XML 标签对大小写敏感。标签  <code>&lt;Letter&gt;</code>  与标签  <code>&lt;letter&gt;</code>  是不同的。</p>\n<p>必须使用相同的大小写来编写打开标签和关闭标签</p>\n</li>\n<li>\n<p><strong>XML 必须正确嵌套</strong></p>\n<p>在 HTML 中，常会看到没有正确嵌套的元素：</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span><span class=\"token punctuation\">></span></span>This text is bold and italic<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>在 XML 中，所有元素都<strong>必须</strong>彼此正确地嵌套：</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span><span class=\"token punctuation\">></span></span>This text is bold and italic<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>在上面的实例中，正确嵌套的意思是：由于 <i> 元素是在 <b> 元素内打开的，那么它必须在 <b> 元素内关闭。</p>\n</li>\n<li>\n<p><strong>XML 属性值必须加引号</strong></p>\n<p>与 HTML 类似，XML 元素也可拥有属性（名称 / 值的对）。</p>\n<p>在 XML 中，XML 的属性值必须加引号。</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>note</span> <span class=\"token attr-name\">date</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>12/11/2007<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>to</span><span class=\"token punctuation\">></span></span>Tove<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>to</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>from</span><span class=\"token punctuation\">></span></span>Jani<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>from</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>note</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></li>\n<li>\n<p><strong>实体引用</strong></p>\n<p>在 XML 中，一些字符拥有特殊的意义。</p>\n<p>如果您把字符 “&lt;” 放在 XML 元素中，会发生错误，这是因为解析器会把它当作新元素的开始。</p>\n<p>这样会产生 XML 错误：</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>message</span><span class=\"token punctuation\">></span></span>if salary &lt; 1000 then<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>message</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>为了避免这个错误，请用<strong>实体引用</strong>来代替 “&lt;” 字符：</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>message</span><span class=\"token punctuation\">></span></span>if salary <span class=\"token entity named-entity\" title=\"&lt;\">&amp;lt;</span> 1000 then<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>message</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>在 XML 中，有 5 个预定义的实体引用：</p>\n<table>\n<thead>\n<tr>\n<th><code> &amp;lt;</code></th>\n<th>&lt;</th>\n<th>less than</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code> &amp;gt;</code></td>\n<td>&gt;</td>\n<td>greater than</td>\n</tr>\n<tr>\n<td><code> &amp;amp;</code></td>\n<td>&amp;</td>\n<td>ampersand</td>\n</tr>\n<tr>\n<td><code> &amp;apos;</code></td>\n<td>’</td>\n<td>apostrophe</td>\n</tr>\n<tr>\n<td><code> &amp;quot;</code></td>\n<td>&quot;</td>\n<td>quotation mark</td>\n</tr>\n</tbody>\n</table>\n<p>** 注释：** 在 XML 中，只有字符 “&lt;” 和 “&amp;” 确实是非法的。大于号是合法的，但是用实体引用来代替它是一个好习惯。</p>\n</li>\n<li>\n<p><strong>XML 中的注释</strong></p>\n<p>在 XML 中编写注释的语法与 HTML 的语法很相似。</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!-- This is a comment --></span></pre></td></tr></table></figure></li>\n<li>\n<p><strong>在 XML 中，空格会被保留</strong></p>\n<p>HTML 会把多个连续的空格字符裁减（合并）为一个：</p>\n<table>\n<thead>\n<tr>\n<th>HTML:</th>\n<th><code>Hello           Tove</code></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>输出结果:</td>\n<td>Hello Tove</td>\n</tr>\n</tbody>\n</table>\n<p>在 XML 中，文档中的空格不会被删减。</p>\n</li>\n<li>\n<p><strong>XML 以 LF 存储换行</strong></p>\n<p>在 Windows 应用程序中，换行通常以一对字符来存储：回车符（CR）和换行符（LF）。</p>\n<p>在 Unix 和 Mac OSX 中，使用 LF 来存储新行。</p>\n<p>在旧的 Mac 系统中，使用 CR 来存储新行。</p>\n<p>XML 以 LF 存储换行。</p>\n</li>\n</ul>\n<h2 id=\"xml元素\"><a class=\"markdownIt-Anchor\" href=\"#xml元素\">#</a> XML 元素</h2>\n<p>XML 元素指的是从（且包括）开始标签直到（且包括）结束标签的部分。</p>\n<p>一个元素可以包含：</p>\n<ul>\n<li>其他元素</li>\n<li>文本</li>\n<li>属性</li>\n<li>或混合以上所有…</li>\n</ul>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bookstore</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>book</span> <span class=\"token attr-name\">category</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CHILDREN<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Harry Potter<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>author</span><span class=\"token punctuation\">></span></span>J K. Rowling<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>author</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>year</span><span class=\"token punctuation\">></span></span>2005<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>year</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>price</span><span class=\"token punctuation\">></span></span>29.99<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>price</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>book</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>book</span> <span class=\"token attr-name\">category</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>WEB<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Learning XML<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>author</span><span class=\"token punctuation\">></span></span>Erik T. Ray<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>author</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>year</span><span class=\"token punctuation\">></span></span>2003<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>year</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>price</span><span class=\"token punctuation\">></span></span>39.95<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>price</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>book</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bookstore</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>在上面的实例中，<bookstore> 和 <book> 都有 元素内容，因为他们包含其他元素。<book> 元素也有属性（category=“CHILDREN”）。<title>、<author>、<year> 和 <price> 有文本内容，因为他们包含文本。</p>\n<blockquote>\n<p><strong>XML 命名规则</strong></p>\n<p>XML 元素必须遵循以下命名规则：</p>\n<ul>\n<li>名称可以包含字母、数字以及其他的字符</li>\n<li>名称不能以数字或者标点符号开始</li>\n<li>名称不能以字母 xml（或者 XML、Xml 等等）开始</li>\n<li>名称不能包含空格</li>\n</ul>\n<p>可使用任何名称，没有保留的字词。</p>\n<p><strong>最佳命名习惯</strong></p>\n<p>使名称具有描述性。使用下划线的名称也很不错：&lt;first_name&gt;、&lt;last_name&gt;。</p>\n<p>名称应简短和简单，比如：&lt;book_title&gt;，而不是：&lt;the_title_of_the_book&gt;。</p>\n<p>避免 “-” 字符。如果您按照这样的方式进行命名：“first-name”，一些软件会认为您想要从 first 里边减去 name。</p>\n<p>避免 “.” 字符。如果您按照这样的方式进行命名：“<span class=\"exturl\" data-url=\"aHR0cDovL2ZpcnN0Lm5hbWU=\">first.name</span>”，一些软件会认为 “name” 是对象 “first” 的属性。</p>\n<p>避免 “:” 字符。冒号会被转换为命名空间来使用（稍后介绍）。</p>\n<p>XML 文档经常有一个对应的数据库，其中的字段会对应 XML 文档中的元素。有一个实用的经验，即使用数据库的命名规则来命名 XML 文档中的元素。</p>\n<p>在 XML 中，éòá 等非英语字母是完全合法的，不过需要留意，您的软件供应商不支持这些字符时可能出现的问题。</p>\n</blockquote>\n<h2 id=\"xml属性\"><a class=\"markdownIt-Anchor\" href=\"#xml属性\">#</a> XML 属性</h2>\n<p>XML 元素具有属性，类似 HTML。</p>\n<p>属性（Attribute）提供有关元素的额外信息。</p>\n<p>在 HTML 中，属性提供有关元素的额外信息：</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"><span>l</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>computer.gif<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>demo.html<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>属性通常提供不属于数据组成部分的信息。在下面的实例中，文件类型与数据无关，但是对需要处理这个元素的软件来说却很重要：</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"><span>l</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>file</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>gif<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>computer.gif<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>file</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h1 id=\"tinyxml-库\"><a class=\"markdownIt-Anchor\" href=\"#tinyxml-库\">#</a> TinyXML 库</h1>\n<p>当前，对 xml 的使用非常广泛，读取和设置 xml 配置文件是最常用的操作。常见 C/C++ XML 解析器有 Tinyxml、XERCES、squashxml、xmlite、pugxml、libxml 等等，这些解析器有些是支持多语言的，有些只是单纯 C/C++ 的。</p>\n<p>TinyXML 是一款基于 DOM 模型的 XML 解析器，简单易用且小巧玲珑，非常适合存储简单数据，配置文件，对象序列化等数据量不是很大的操作。这个解析库的模型通过解析 XML 文件，然后在内存中生成 DOM 模型，从而让我们很方便的遍历这棵 XML 树。</p>\n<p>安装：解压缩 tinyXML 后，将这六个文件添加到 C++ 工程中，分别是 tinystr.h、tinystr.cpp、tinyxml.h、tinyxml.cpp、tinyxmlerror.cpp、tinyxmlparser.cpp。在需要操作 xml 文件的地方，使用如下代码，就可以引入 TinyXML 类库</p>\n<h2 id=\"tinyxml类结构\"><a class=\"markdownIt-Anchor\" href=\"#tinyxml类结构\">#</a> TinyXml 类结构</h2>\n<ul>\n<li>TiXmlBase：整个 TinyXML 模型的基类。</li>\n<li>TiXmlAttribute：对应于 XML 中的元素的属性。</li>\n<li>TiXmlNode：对应于 DOM 结构中的节点。</li>\n<li>TiXmlComment：对应于 XML 中的注释</li>\n<li>TiXmlDeclaration：对应于 XML 中的申明部分，即 &lt;？versiong=“1.0” ?&gt;。</li>\n<li>TiXmlDocument：对应于 XML 的整个文档。</li>\n<li>TiXmlElement：对应于 XML 的元素。</li>\n<li>TiXmlText：对应于 XML 的文字部分</li>\n<li>TiXmlUnknown：对应于 XML 的未知部分。</li>\n<li>TiXmlHandler：定义了针对 XML 的一些操作。</li>\n</ul>\n<h2 id=\"tinyxml常用方法\"><a class=\"markdownIt-Anchor\" href=\"#tinyxml常用方法\">#</a> TinyXml 常用方法</h2>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"><span>p</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>TiXmlDocument doc<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// Loadfile 载入文件</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>doc<span class=\"token punctuation\">.</span><span class=\"token function\">LoadFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 获取根节点元素</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>TiXmlElement <span class=\"token operator\">*</span>root <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 获取元素名</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>QString ElementName <span class=\"token operator\">=</span> root<span class=\"token operator\">-></span><span class=\"token function\">Value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 判断该元素是否有子元素 返回 true 有，false 没有</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">bool</span> Children <span class=\"token operator\">=</span> root<span class=\"token operator\">-></span><span class=\"token function\">NoChildren</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"14\"></td><td><pre> </pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">// 获取 root 元素下的第一个子元素</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>TiXmlElement <span class=\"token operator\">*</span>child <span class=\"token operator\">=</span> root<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 获取 root 元素的子元素指定元素名字</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>child <span class=\"token operator\">=</span> root<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"major\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"20\"></td><td><pre> </pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">// 获取 child 元素的下一个兄弟元素</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>TiXmlElement <span class=\"token operator\">*</span>brother <span class=\"token operator\">=</span> child<span class=\"token operator\">-></span><span class=\"token function\">NextSiblingElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">// 获取 child 元素的兄弟元素指定元素名字</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>brother <span class=\"token operator\">=</span> child<span class=\"token operator\">-></span><span class=\"token function\">NextSiblingElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"specVersion\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">// 获取 brother 元素的值</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>QString text <span class=\"token operator\">=</span> brother<span class=\"token operator\">-></span><span class=\"token function\">GetText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">// 获取 brother 元素的第一个属性</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>TiXmlAttribute <span class=\"token operator\">*</span>Attribute <span class=\"token operator\">=</span> brother<span class=\"token operator\">-></span><span class=\"token function\">FirstAttribute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\">// 获取 Attribute 属性的名字 QString </span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>QString AttributeName <span class=\"token operator\">=</span> Attribute<span class=\"token operator\">-></span><span class=\"token function\">Name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">// 获取 Attribute 属性的值</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>AttributeValue <span class=\"token operator\">=</span> Attribute<span class=\"token operator\">-></span><span class=\"token function\">Value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\">// 获取 brother 的属性名为 (AttributeName) 的值</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>AttributeValue <span class=\"token operator\">=</span> brother<span class=\"token operator\">-></span><span class=\"token function\">Attribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AttributeName\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\">// 创建一个 XML 文件</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>TiXmlDocument <span class=\"token operator\">*</span>myDocument <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token comment\">// 创建 xml 文件头（&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?>）</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>TiXmlDeclaration <span class=\"token operator\">*</span>pDeclaration<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlDeclaration</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1.0\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"UTF-8\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token comment\">// 加入将 xml 文件头加入文档中</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>myDocument<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>pDeclaration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token comment\">// 创建一个元素节点</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>TiXmlElement <span class=\"token operator\">*</span>BUSINESS<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BUSINESS\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"54\"></td><td><pre></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token comment\">// 加入 BUSINESS 元素节点到文档中</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>myDocument<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>BUSINESS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token comment\">// 创建两个节点</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>TiXmlElement <span class=\"token operator\">*</span>COUNTRY <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"COUNTRY\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"60\"></td><td><pre>TiXmlElement <span class=\"token operator\">*</span>PLANET <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PLANET\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token comment\">// 将新建的节点加到 BUSINESS 下一级</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>BUSINESS<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>PLANET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"64\"></td><td><pre>BUSINESS<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>COUNTRY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token comment\">// 添加节点内的文本</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>TiXmlText <span class=\"token operator\">*</span>PLANETtxt <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"one\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"68\"></td><td><pre>TiXmlText <span class=\"token operator\">*</span>COUNTRYtxt <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"china\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>COUNTRY<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>COUNTRYtxt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>PLANET<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>PLANETtxt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token comment\">// 保存 xml</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>myDocument<span class=\"token operator\">-></span><span class=\"token function\">SaveFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"tinyxml读写xml\"><a class=\"markdownIt-Anchor\" href=\"#tinyxml读写xml\">#</a> TinyXml 读写 xml</h2>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"><span>p</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"stdafx.h\"</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Configer.h\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Windows.h></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//UTF-8 转换成 GB2312</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">char</span><span class=\"token operator\">*</span> <span class=\"token function\">U2G</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span> utf8<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token function\">MultiByteToWideChar</span><span class=\"token punctuation\">(</span>CP_UTF8<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> utf8<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token keyword\">wchar_t</span><span class=\"token operator\">*</span> wstr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">wchar_t</span><span class=\"token punctuation\">[</span>len <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t<span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>wstr<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> len <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t<span class=\"token function\">MultiByteToWideChar</span><span class=\"token punctuation\">(</span>CP_UTF8<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> utf8<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> wstr<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\tlen <span class=\"token operator\">=</span> <span class=\"token function\">WideCharToMultiByte</span><span class=\"token punctuation\">(</span>CP_ACP<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> wstr<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t<span class=\"token keyword\">char</span><span class=\"token operator\">*</span> str <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">char</span><span class=\"token punctuation\">[</span>len <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t<span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> len <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t<span class=\"token function\">WideCharToMultiByte</span><span class=\"token punctuation\">(</span>CP_ACP<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> wstr<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>wstr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\t<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t\t<span class=\"token keyword\">delete</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> wstr<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t\twstr <span class=\"token operator\">=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t<span class=\"token keyword\">return</span> str<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">//GB2312 转换成 UTF8</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">char</span><span class=\"token operator\">*</span> <span class=\"token function\">G2U</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span> gb2312<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>\t<span class=\"token keyword\">int</span> len <span class=\"token operator\">=</span> <span class=\"token function\">MultiByteToWideChar</span><span class=\"token punctuation\">(</span>CP_ACP<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> gb2312<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t<span class=\"token keyword\">wchar_t</span><span class=\"token operator\">*</span> wstr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">wchar_t</span><span class=\"token punctuation\">[</span>len <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\t<span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>wstr<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> len <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>\t<span class=\"token function\">MultiByteToWideChar</span><span class=\"token punctuation\">(</span>CP_ACP<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> gb2312<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> wstr<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>\tlen <span class=\"token operator\">=</span> <span class=\"token function\">WideCharToMultiByte</span><span class=\"token punctuation\">(</span>CP_UTF8<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> wstr<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>\t<span class=\"token keyword\">char</span><span class=\"token operator\">*</span> str <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">char</span><span class=\"token punctuation\">[</span>len <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>\t<span class=\"token function\">memset</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> len <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>\t<span class=\"token function\">WideCharToMultiByte</span><span class=\"token punctuation\">(</span>CP_UTF8<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> wstr<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>wstr<span class=\"token punctuation\">)</span> <span class=\"token keyword\">delete</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> wstr<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>\t<span class=\"token keyword\">return</span> str<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token class-name\">Configer</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Configer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token class-name\">Configer</span><span class=\"token double-colon punctuation\">::</span><span class=\"token operator\">~</span><span class=\"token function\">Configer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>std<span class=\"token double-colon punctuation\">::</span>string <span class=\"token class-name\">Configer</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">FilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>\tstd<span class=\"token double-colon punctuation\">::</span>string strPath<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>\tHMODULE hModule <span class=\"token operator\">=</span> <span class=\"token function\">GetModuleHandle</span><span class=\"token punctuation\">(</span><span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 得到某一模块的句柄</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>\t<span class=\"token keyword\">char</span> cFilePath<span class=\"token punctuation\">[</span>MAX_PATH<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>\t<span class=\"token function\">GetModuleFileNameA</span><span class=\"token punctuation\">(</span>hModule<span class=\"token punctuation\">,</span> cFilePath<span class=\"token punctuation\">,</span> MAX_PATH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 获得当前运行程序的绝对路径</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>\tstd<span class=\"token double-colon punctuation\">::</span>string strModulFullPath <span class=\"token operator\">=</span> cFilePath<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>\tsize_t npos <span class=\"token operator\">=</span> strModulFullPath<span class=\"token punctuation\">.</span><span class=\"token function\">rfind</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\\\\"</span><span class=\"token punctuation\">,</span> strModulFullPath<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 查找字符串在当前字符串中最后一次出现的位置</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>npos <span class=\"token operator\">!=</span> std<span class=\"token double-colon punctuation\">::</span>string<span class=\"token double-colon punctuation\">::</span>npos<span class=\"token punctuation\">)</span>\t\t<span class=\"token comment\">// 如果没找到，返回一个特别的标志 c++ 中用 npos 表示，我这里 npos 取值是 4294967295，</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>\t<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>\t\tstrPath <span class=\"token operator\">=</span> strModulFullPath<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> npos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>\t<span class=\"token keyword\">return</span> strPath <span class=\"token operator\">+</span> <span class=\"token string\">\"\\\\cfg.xml\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token keyword\">bool</span> <span class=\"token class-name\">Configer</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>\tstd<span class=\"token double-colon punctuation\">::</span>shared_ptr<span class=\"token operator\">&lt;</span>TiXmlDocument<span class=\"token operator\">></span> <span class=\"token function\">doc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> TiXmlDocument<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 创建 XML 文档对象</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>\tTiXmlDeclaration <span class=\"token operator\">*</span>dec <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlDeclaration</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1.0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"UTF-8\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 文档描述</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>\tTiXmlElement <span class=\"token operator\">*</span>net <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"net\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 创建一个根节点</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>\tdoc<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>net<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 链接到文档对象下</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>\tTiXmlElement <span class=\"token operator\">*</span>tradeNet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TradeNet\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>\tnet<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>tradeNet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 链接到 net 节点下</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>\ttradeNet<span class=\"token operator\">-></span><span class=\"token function\">SetAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ip\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"127.0.0.1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 设置节点属性</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>\ttradeNet<span class=\"token operator\">-></span><span class=\"token function\">SetAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"port\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"18068\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>\tTiXmlElement <span class=\"token operator\">*</span>quoteNet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"QuoteNet\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>\tnet<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>quoteNet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>\tquoteNet<span class=\"token operator\">-></span><span class=\"token function\">SetAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ip\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"127.0.0.2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>\tquoteNet<span class=\"token operator\">-></span><span class=\"token function\">SetAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"port\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"18069\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>\tTiXmlElement <span class=\"token operator\">*</span>account <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Account\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>\tdoc<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>account<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>\tTiXmlElement <span class=\"token operator\">*</span>acc <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"account\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>\taccount<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>\tacc<span class=\"token operator\">-></span><span class=\"token function\">SetAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"acc\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"123456\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>\tTiXmlElement <span class=\"token operator\">*</span>acc1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"account\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>\taccount<span class=\"token operator\">-></span><span class=\"token function\">LinkEndChild</span><span class=\"token punctuation\">(</span>acc1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>\tacc1<span class=\"token operator\">-></span><span class=\"token function\">SetAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"acc\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"589456\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>\t<span class=\"token keyword\">return</span> doc<span class=\"token operator\">-></span><span class=\"token function\">SaveFile</span><span class=\"token punctuation\">(</span><span class=\"token function\">FilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 保存文档</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre><span class=\"token keyword\">bool</span> <span class=\"token class-name\">Configer</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Load</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>\tstd<span class=\"token double-colon punctuation\">::</span>shared_ptr<span class=\"token operator\">&lt;</span>TiXmlDocument<span class=\"token operator\">></span> <span class=\"token function\">doc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> TiXmlDocument<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>doc<span class=\"token operator\">-></span><span class=\"token function\">LoadFile</span><span class=\"token punctuation\">(</span><span class=\"token function\">FilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\t\t<span class=\"token comment\">// 加载文件</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>\t<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>\t\tstd<span class=\"token double-colon punctuation\">::</span>cout <span class=\"token operator\">&lt;&lt;</span> doc<span class=\"token operator\">-></span><span class=\"token function\">ErrorDesc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> std<span class=\"token double-colon punctuation\">::</span>endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>\tTiXmlElement <span class=\"token operator\">*</span>net <span class=\"token operator\">=</span> doc<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Account\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 索引到节点</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>net <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>\t<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>\tTiXmlElement <span class=\"token operator\">*</span>node <span class=\"token operator\">=</span> net<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"account\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 索引到节点</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span>\t<span class=\"token comment\">// 遍历节点</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>\t<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>\t\tstd<span class=\"token double-colon punctuation\">::</span>string acc <span class=\"token operator\">=</span> node<span class=\"token operator\">-></span><span class=\"token function\">Attribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"acc\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>\t\tnode <span class=\"token operator\">=</span> node<span class=\"token operator\">-></span><span class=\"token function\">NextSiblingElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// 将当前节点指针指向下一个节点</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>\t\t</pre></td></tr><tr><td data-num=\"118\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"loadconfig源码解析\"><a class=\"markdownIt-Anchor\" href=\"#loadconfig源码解析\">#</a> LoadConfig () 源码解析</h2>\n<p>ScanConfig.cfg</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"><span>l</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ScanConfig</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">&lt;!--&lt;Normal YOffset=\"60\" ForceOffsetY=\"0\" /> --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>XRay</span> <span class=\"token attr-name\">SteadyTime</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>CTScan</span> <span class=\"token attr-name\">SteadyTime</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>50<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>DeviceAdjust</span> <span class=\"token attr-name\">FilamentInterval</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>14400000<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">CenterKVInterval</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2700000<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">SteadyTime</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10000<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Enable</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">AdjustSteadyTime</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">&lt;!--&lt;FastScan BufferAngle=\"5\" />--></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>LensConfig</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Lens</span> <span class=\"token attr-name\">Id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Factor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">MergeCount</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Lens</span> <span class=\"token attr-name\">Id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Factor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">MergeCount</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Lens</span> <span class=\"token attr-name\">Id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Factor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.025<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">MergeCount</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Lens</span> <span class=\"token attr-name\">Id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Factor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.015<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">MergeCount</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Lens</span> <span class=\"token attr-name\">Id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Factor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.6<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">MergeCount</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>LensConfig</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">&lt;!--&lt;MachineOffset></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        &lt;MicroView></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            &lt;Position1 Value=\"105\" Height1=\"300\" Height1Offset=\"17\" Height2=\"1500\" Height2Offset=\"14\" /></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            &lt;Position2 Value=\"80\" Height1=\"300\" Height1Offset=\"63\" Height2=\"1500\" Height2Offset=\"59\" /></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        &lt;/MicroView></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        &lt;BroadView></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            &lt;Position1 Value=\"0\" Height1=\"0\" Height1Offset=\"0\" Height2=\"0\" Height2Offset=\"0\" /></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            &lt;Position2 Value=\"0\" Height1=\"0\" Height1Offset=\"0\" Height2=\"0\" Height2Offset=\"0\" /></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        &lt;/BroadView></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    &lt;/MachineOffset> --></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>EvaluateTime</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MoveTime</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.591<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Reference</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1.153<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MicroView</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3.767<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Reference</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3.379<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>BroadView</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.736<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Reference</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.247<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>DelayTime</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.046<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Reference</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.046<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>EvaluateTime</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MiscOptions</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SerialID</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>MX3000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ScanFrameNum</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>180;360;720;1080;1440;1800<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SerialSteadyTime</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0;10;20;30;60<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>AppRegPath</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HKEY_CURRENT_USER\\Software\\NanoVoxelScan\\NanoVoxelScan<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>RecentFileNum</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FloatPrecision</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>MiscOptions</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>XRayRecovery</span> <span class=\"token attr-name\">WaitXRayOn</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20000<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">WaitXRayOff</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SpiralScan</span> <span class=\"token attr-name\">FrameWidth</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">FrameHeight</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3072<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">CanRotateAll</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ReconFeaturing</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ScanConfig</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>CTScanConfigDlg.cpp</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token class-name\">CTScanConfigDlg</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">LoadConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// 创建指向 TiXmlDocument 对象的指针 pDoc，并初始化</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    std<span class=\"token double-colon punctuation\">::</span>auto_ptr<span class=\"token operator\">&lt;</span>TiXmlDocument<span class=\"token operator\">></span> <span class=\"token function\">pDoc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlDocument</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Config/ScanConfig.cfg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    pDoc<span class=\"token operator\">-></span><span class=\"token function\">LoadFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>pDoc<span class=\"token operator\">-></span><span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// 获取根节点元素 ScanConfig，存在指针 pRoot 中</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        TiXmlElement<span class=\"token operator\">*</span> pRoot <span class=\"token operator\">=</span> pDoc<span class=\"token operator\">-></span><span class=\"token function\">RootElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// 获取 root 元素的子元素，指定元素名字 \"EvaluateTime\" 预估扫描时间</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        TiXmlElement<span class=\"token operator\">*</span> pEvaluateTimeElem <span class=\"token operator\">=</span> pRoot<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"EvaluateTime\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pEvaluateTimeElem <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token comment\">// 获取 EvaluateTime 元素的子元素，指定元素名字 \"MoveTime\"</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            TiXmlElement<span class=\"token operator\">*</span> pMoveTimeElem <span class=\"token operator\">=</span> pEvaluateTimeElem<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MoveTime\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pMoveTimeElem <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token comment\">// 查询该属性是否存在，若存在则写入 mMoveTime</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                pMoveTimeElem<span class=\"token operator\">-></span><span class=\"token function\">QueryFloatAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Value\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>mMoveTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            TiXmlElement<span class=\"token operator\">*</span> pMicroViewTimeElem <span class=\"token operator\">=</span> pEvaluateTimeElem<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MicroView\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pMicroViewTimeElem <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                pMicroViewTimeElem<span class=\"token operator\">-></span><span class=\"token function\">QueryFloatAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Value\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>mMicroViewTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            TiXmlElement<span class=\"token operator\">*</span> pBroadViewTimeElem <span class=\"token operator\">=</span> pEvaluateTimeElem<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BroadView\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pBroadViewTimeElem <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                pBroadViewTimeElem<span class=\"token operator\">-></span><span class=\"token function\">QueryFloatAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Value\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>mBroadViewTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            TiXmlElement<span class=\"token operator\">*</span> pDelayTimeElem <span class=\"token operator\">=</span> pEvaluateTimeElem<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DelayTime\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pDelayTimeElem <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                pDelayTimeElem<span class=\"token operator\">-></span><span class=\"token function\">QueryFloatAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Value\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>mDelayTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>\t\t<span class=\"token comment\">// 获取 root 元素的子元素，指定元素名字 \"MiscOptions\" 杂项</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        TiXmlElement<span class=\"token operator\">*</span> pMiscOptionsElem <span class=\"token operator\">=</span> pRoot<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MiscOptions\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pMiscOptionsElem <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token comment\">// 读取扫描帧数</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            TiXmlElement<span class=\"token operator\">*</span> pScanFrameNumElem <span class=\"token operator\">=</span> pMiscOptionsElem<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ScanFrameNum\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pScanFrameNumElem <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                std<span class=\"token double-colon punctuation\">::</span>string frame_count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                pScanFrameNumElem<span class=\"token operator\">-></span><span class=\"token function\">QueryStringAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Value\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>frame_count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>                </pre></td></tr><tr><td data-num=\"45\"></td><td><pre>                std<span class=\"token double-colon punctuation\">::</span>vector<span class=\"token operator\">&lt;</span>std<span class=\"token double-colon punctuation\">::</span>string<span class=\"token operator\">></span> stringVec<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                <span class=\"token class-name\">Utility</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">StringSplit</span><span class=\"token punctuation\">(</span>frame_count<span class=\"token punctuation\">,</span> <span class=\"token string\">\";\"</span><span class=\"token punctuation\">,</span> stringVec<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                mFrameCount<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>                <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>size_t i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> stringVec<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>                    mFrameCount<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span><span class=\"token function\">atoi</span><span class=\"token punctuation\">(</span>stringVec<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>\t\t\t<span class=\"token comment\">// 读取射线源稳定时间</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>\t\t\tTiXmlElement<span class=\"token operator\">*</span> pSerialSteadyTimeElem <span class=\"token operator\">=</span> pMiscOptionsElem<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SerialSteadyTime\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>pSerialSteadyTimeElem <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>\t\t\t<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>\t\t\t\tstd<span class=\"token double-colon punctuation\">::</span>string steadyTime<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>\t\t\t\tpSerialSteadyTimeElem<span class=\"token operator\">-></span><span class=\"token function\">QueryStringAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Value\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>steadyTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>\t\t\t\tstd<span class=\"token double-colon punctuation\">::</span>vector<span class=\"token operator\">&lt;</span>std<span class=\"token double-colon punctuation\">::</span>string<span class=\"token operator\">></span> stringVec<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>\t\t\t\t<span class=\"token class-name\">Utility</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">StringSplit</span><span class=\"token punctuation\">(</span>steadyTime<span class=\"token punctuation\">,</span> <span class=\"token string\">\";\"</span><span class=\"token punctuation\">,</span> stringVec<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>\t\t\t\tmSerialSteadyTime<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>\t\t\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>size_t i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> stringVec<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>\t\t\t\t\tmSerialSteadyTime<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span><span class=\"token function\">atoi</span><span class=\"token punctuation\">(</span>stringVec<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>\t\t\t\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>\t\t\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>\t\t<span class=\"token comment\">//CT 扫描是否有重建功能</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>\t\tTiXmlElement<span class=\"token operator\">*</span> pReconFeaturing <span class=\"token operator\">=</span> pRoot<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ReconFeaturing\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>pReconFeaturing <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>\t\t<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>\t\t\tpReconFeaturing<span class=\"token operator\">-></span><span class=\"token function\">QueryBoolAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Value\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>mbReconFeaturing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>\t\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>        <span class=\"token class-name\">HPCDumper</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">GetInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Read ScanConfig.cfg config failed!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"加载多条同一元素数据\"><a class=\"markdownIt-Anchor\" href=\"#加载多条同一元素数据\">#</a> 加载多条同一元素数据</h2>\n<p>motorhomestep.cfg</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MotorHomeStep</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Step</span> <span class=\"token attr-name\">Type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Actions</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0;1;3;6;7<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Step</span> <span class=\"token attr-name\">Type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Actions</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Step</span> <span class=\"token attr-name\">Type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Actions</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0;1;6;3;7;8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Step</span> <span class=\"token attr-name\">Type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Actions</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>6:198<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Step</span> <span class=\"token attr-name\">Type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Actions</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>6<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>MotorHomeStep</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>TiXml 加载数据</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 加载回零操作的配置文件</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>std<span class=\"token double-colon punctuation\">::</span>auto_ptr<span class=\"token operator\">&lt;</span>TiXmlDocument<span class=\"token operator\">></span> <span class=\"token function\">pDoc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">TiXmlDocument</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Config/MotorHomeStep.cfg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>pDoc<span class=\"token operator\">-></span><span class=\"token function\">LoadFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>pDoc<span class=\"token operator\">-></span><span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// typedef std::vector&lt;StepPtr>  StepSequence;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// StepSequence    mMotorHomeSeq;   // 回零动作序列</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    mMotorHomeSeq<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    TiXmlElement<span class=\"token operator\">*</span> pRoot <span class=\"token operator\">=</span> pDoc<span class=\"token operator\">-></span><span class=\"token function\">RootElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    TiXmlElement<span class=\"token operator\">*</span> pStepElem <span class=\"token operator\">=</span> pRoot<span class=\"token operator\">-></span><span class=\"token function\">FirstChildElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Step\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>pStepElem <span class=\"token operator\">!=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">int</span> type <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        std<span class=\"token double-colon punctuation\">::</span>string actions<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        pStepElem<span class=\"token operator\">-></span><span class=\"token function\">QueryIntAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Type\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        pStepElem<span class=\"token operator\">-></span><span class=\"token function\">QueryStringAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Actions\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>actions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        mMotorHomeSeq<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span><span class=\"token function\">StepPtr</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">Step</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        pStepElem <span class=\"token operator\">=</span> pStepElem<span class=\"token operator\">-></span><span class=\"token function\">NextSiblingElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li><code>pStepElem = pRoot-&gt;FirstChildElement()</code>  读取第一条 step 元素</li>\n<li><code>pStepElem = pStepElem-&gt;NextSiblingElement()</code>  读取下一条 step 元素</li>\n</ul>\n<h1 id=\"xml-javascript\"><a class=\"markdownIt-Anchor\" href=\"#xml-javascript\">#</a> XML JavaScript</h1>\n<h1 id=\"xml进阶\"><a class=\"markdownIt-Anchor\" href=\"#xml进阶\">#</a> XML 进阶</h1>\n",
            "tags": [
                "C++",
                "XML"
            ]
        }
    ]
}