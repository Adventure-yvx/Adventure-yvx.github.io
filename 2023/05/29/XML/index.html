



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="" href="https://adventure-yx.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="" href="https://adventure-yx.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="" href="https://adventure-yx.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="C++,XML" />


<link rel="canonical" href="https://adventure-yx.github.io/2023/05/29/XML/">



  <title>
XML & TinyXML - XML |
Adventure =  = 心有所向。日复一日，必有精进</title>
<meta name="generator" content="Hexo 6.3.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">XML & TinyXML
  </h1>
  
<div class="meta">
  <span class="item" title="创建时间：2023-05-29 10:15:50">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">发表于</span>
    <time itemprop="dateCreated datePublished" datetime="2023-05-29T10:15:50+08:00">2023-05-29</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="切换导航栏">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Adventure</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://img.picgo.net/2023/04/02/sky-1683c8e10dd42012a8.jpeg"></li>
          <li class="item" data-background-image="https://img.picgo.net/2023/04/02/sky-20aaa4da442993f8b8.png"></li>
          <li class="item" data-background-image="https://img.picgo.net/2023/04/02/sky-187e4d08bbd3af08b1.png"></li>
          <li class="item" data-background-image="https://img.picgo.net/2023/04/02/sky-99681dcf7dddeea33.jpeg"></li>
          <li class="item" data-background-image="https://cdn.jsdelivr.net/gh/Adventure-yx/img/banner/sky-8.jpg"></li>
          <li class="item" data-background-image="https://img.picgo.net/2023/04/02/sky-3b2f6d510326b07dd.jpeg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">首页</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/XML/" itemprop="item" rel="index" title="分类于 XML"><span itemprop="name">XML</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="https://adventure-yx.github.io/2023/05/29/XML/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="AdventureYX">
    <meta itemprop="description" content="心有所向。日复一日，必有精进, ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h1 id="tixml打开文件失败解决办法"><a class="markdownIt-Anchor" href="#tixml打开文件失败解决办法">#</a> TiXML 打开文件失败解决办法</h1>
<p>问题描述</p>
<p>在 Dlg.cpp 中 <code>std::auto_ptr&lt;TiXmlDocument&gt; pDoc(new TiXmlDocument(&quot;config.cfg&quot;));</code>  加载文件失败</p>
<p>解决方法</p>
<p>把包含在 Dlg.cpp 中的 TiXML 头文件移除，包含在 stdafx.h 中</p>
<figure class="highlight cpp"><figcaption data-lang="C++"><span>p</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">TIXML_USE_STL</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"TinyXml/tinyxml.h"</span></span></pre></td></tr></table></figure><blockquote>
<p>路径中注意 <code>\</code>  要用 <code>\\</code>  转义或使用 <code>/</code></p>
</blockquote>
<h1 id="xml"><a class="markdownIt-Anchor" href="#xml">#</a> XML</h1>
<h2 id="xml简介"><a class="markdownIt-Anchor" href="#xml简介">#</a> XML 简介</h2>
<p>XML 被设计用来传输和存储数据。</p>
<p>HTML 被设计用来显示数据。</p>
<p>XML 指可扩展标记语言（eXtensible Markup Language）。</p>
<p>可扩展标记语言（英语：Extensible Markup Language，简称：XML）是一种标记语言，是从标准通用标记语言（SGML）中简化修改出来的。</p>
<ul>
<li>
<p>什么是 XML？</p>
<ul>
<li>XML 指可扩展标记语言（EXtensible Markup Language）。</li>
<li>XML 是一种很像 HTML 的标记语言。</li>
<li>XML 的设计宗旨是传输数据，而不是显示数据。</li>
<li>XML 标签没有被预定义。您需要自行定义标签。</li>
<li>XML 被设计为具有自我描述性。</li>
<li>XML 是 W3C 的推荐标准。</li>
</ul>
</li>
<li>
<p>XML 和 HTML 之间的差异</p>
<p>XML 不是 HTML 的替代。</p>
<p>XML 和 HTML 为不同的目的而设计：</p>
<ul>
<li>XML 被设计用来传输和存储数据，其焦点是数据的内容。</li>
<li>HTML 被设计用来显示数据，其焦点是数据的外观。</li>
</ul>
<p>HTML 旨在显示信息，而 XML 旨在传输信息。</p>
</li>
<li>
<p>XML 不会做任何事情</p>
<p>也许这有点难以理解，但是 XML 不会做任何事情。XML 被设计用来结构化、存储以及传输信息。</p>
</li>
<li>
<p>通过 XML 您可以发明自己的标签</p>
</li>
<li>
<p>XML 不是对 HTML 的替代</p>
<p><strong>XML 是对 HTML 的补充。</strong></p>
<p>XML 不会替代 HTML，理解这一点很重要。在大多数 Web 应用程序中，XML 用于传输数据，而 HTML 用于格式化并显示数据。</p>
<p>对 XML 最好的描述是：</p>
<p><strong>XML 是独立于软件和硬件的信息传输工具。</strong></p>
</li>
<li>
<p>XML 无所不在</p>
<p>目前，XML 在 Web 中起到的作用不会亚于一直作为 Web 基石的 HTML。</p>
<p>XML 是各种应用程序之间进行数据传输的最常用的工具。</p>
</li>
</ul>
<h2 id="xml用途"><a class="markdownIt-Anchor" href="#xml用途">#</a> XML 用途</h2>
<p>XML 应用于 Web 开发的许多方面，常用于简化数据的存储和共享。</p>
<ul>
<li>
<p><strong>XML 把数据从 HTML 分离</strong></p>
<p>如果需要在 HTML 文档中显示动态数据，那么每当数据改变时将花费大量的时间来编辑 HTML。</p>
<p>通过 XML，数据能够存储在独立的 XML 文件中。这样就可以专注于使用 HTML/CSS 进行显示和布局，并确保修改底层数据不再需要对 HTML 进行任何的改变。</p>
<p>通过使用几行 JavaScript 代码，就可以读取一个外部 XML 文件，并更新网页的数据内容。</p>
</li>
<li>
<p><strong>XML 简化数据共享</strong></p>
<p>在真实的世界中，计算机系统和数据使用不兼容的格式来存储数据。</p>
<p>XML 数据以纯文本格式进行存储，因此提供了一种独立于软件和硬件的数据存储方法。</p>
<p>这让创建不同应用程序可以共享的数据变得更加容易。</p>
</li>
<li>
<p><strong>XML 简化数据传输</strong></p>
<p>对开发人员来说，其中一项最费时的挑战<strong>一直是在互联网上的不兼容系统之间交换数据。</strong></p>
<p>由于可以通过各种不兼容的应用程序来读取数据，以 XML 交换数据降低了这种复杂性。</p>
</li>
<li>
<p><strong>XML 简化平台变更</strong></p>
<p>升级到新的系统（硬件或软件平台），总是非常费时的。必须转换大量的数据，不兼容的数据经常会丢失。</p>
<p>XML 数据以文本格式存储。这使得 XML 在不损失数据的情况下，更容易扩展或升级到新的操作系统、新的应用程序或新的浏览器。</p>
</li>
</ul>
<h2 id="xml语法"><a class="markdownIt-Anchor" href="#xml语法">#</a> XML 语法</h2>
<ul>
<li>
<p><strong>XML 文档必须有根元素</strong></p>
<p>XML 必须包含根元素，它是所有其他元素的父元素</p>
</li>
<li>
<p><strong>XML 声明</strong></p>
<p>XML 声明文件的可选部分，如果存在需要放在文档的第一行，如下所示：</p>
<figure class="highlight cpp"><figcaption data-lang="C++"><span>p</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">?</span><span class="token operator">></span></pre></td></tr></table></figure><blockquote>
<p>以上实例包含 XML 版本</p>
<p>UTF-8 也是 HTML5, CSS, JavaScript, PHP, 和 SQL 的默认编码。</p>
</blockquote>
</li>
<li>
<p><strong>所有的 XML 元素都必须有一个关闭标签</strong></p>
<p>在 HTML 中，某些元素不必有一个关闭标签：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>This is a paragraph.</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>在 XML 中，省略关闭标签是非法的。所有元素都<strong>必须</strong>有关闭标签：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>This is a paragraph.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span></pre></td></tr></table></figure></li>
<li>
<p><strong>XML 标签对大小写敏感</strong></p>
<p>XML 标签对大小写敏感。标签  <code>&lt;Letter&gt;</code>  与标签  <code>&lt;letter&gt;</code>  是不同的。</p>
<p>必须使用相同的大小写来编写打开标签和关闭标签</p>
</li>
<li>
<p><strong>XML 必须正确嵌套</strong></p>
<p>在 HTML 中，常会看到没有正确嵌套的元素：</p>
<figure class="highlight html"><figcaption data-lang="HTML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">></span></span>This text is bold and italic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>在 XML 中，所有元素都<strong>必须</strong>彼此正确地嵌套：</p>
<figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">></span></span>This text is bold and italic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>在上面的实例中，正确嵌套的意思是：由于 <i> 元素是在 <b> 元素内打开的，那么它必须在 <b> 元素内关闭。</p>
</li>
<li>
<p><strong>XML 属性值必须加引号</strong></p>
<p>与 HTML 类似，XML 元素也可拥有属性（名称 / 值的对）。</p>
<p>在 XML 中，XML 的属性值必须加引号。</p>
<figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>note</span> <span class="token attr-name">date</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12/11/2007<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to</span><span class="token punctuation">></span></span>Tove<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>to</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>from</span><span class="token punctuation">></span></span>Jani<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>from</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>note</span><span class="token punctuation">></span></span></pre></td></tr></table></figure></li>
<li>
<p><strong>实体引用</strong></p>
<p>在 XML 中，一些字符拥有特殊的意义。</p>
<p>如果您把字符 “&lt;” 放在 XML 元素中，会发生错误，这是因为解析器会把它当作新元素的开始。</p>
<p>这样会产生 XML 错误：</p>
<figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message</span><span class="token punctuation">></span></span>if salary &lt; 1000 then<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>message</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>为了避免这个错误，请用<strong>实体引用</strong>来代替 “&lt;” 字符：</p>
<figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message</span><span class="token punctuation">></span></span>if salary <span class="token entity named-entity" title="&lt;">&amp;lt;</span> 1000 then<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>message</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>在 XML 中，有 5 个预定义的实体引用：</p>
<table>
<thead>
<tr>
<th><code> &amp;lt;</code></th>
<th>&lt;</th>
<th>less than</th>
</tr>
</thead>
<tbody>
<tr>
<td><code> &amp;gt;</code></td>
<td>&gt;</td>
<td>greater than</td>
</tr>
<tr>
<td><code> &amp;amp;</code></td>
<td>&amp;</td>
<td>ampersand</td>
</tr>
<tr>
<td><code> &amp;apos;</code></td>
<td>’</td>
<td>apostrophe</td>
</tr>
<tr>
<td><code> &amp;quot;</code></td>
<td>&quot;</td>
<td>quotation mark</td>
</tr>
</tbody>
</table>
<p>** 注释：** 在 XML 中，只有字符 “&lt;” 和 “&amp;” 确实是非法的。大于号是合法的，但是用实体引用来代替它是一个好习惯。</p>
</li>
<li>
<p><strong>XML 中的注释</strong></p>
<p>在 XML 中编写注释的语法与 HTML 的语法很相似。</p>
<figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">&lt;!-- This is a comment --></span></pre></td></tr></table></figure></li>
<li>
<p><strong>在 XML 中，空格会被保留</strong></p>
<p>HTML 会把多个连续的空格字符裁减（合并）为一个：</p>
<table>
<thead>
<tr>
<th>HTML:</th>
<th><code>Hello           Tove</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>输出结果:</td>
<td>Hello Tove</td>
</tr>
</tbody>
</table>
<p>在 XML 中，文档中的空格不会被删减。</p>
</li>
<li>
<p><strong>XML 以 LF 存储换行</strong></p>
<p>在 Windows 应用程序中，换行通常以一对字符来存储：回车符（CR）和换行符（LF）。</p>
<p>在 Unix 和 Mac OSX 中，使用 LF 来存储新行。</p>
<p>在旧的 Mac 系统中，使用 CR 来存储新行。</p>
<p>XML 以 LF 存储换行。</p>
</li>
</ul>
<h2 id="xml元素"><a class="markdownIt-Anchor" href="#xml元素">#</a> XML 元素</h2>
<p>XML 元素指的是从（且包括）开始标签直到（且包括）结束标签的部分。</p>
<p>一个元素可以包含：</p>
<ul>
<li>其他元素</li>
<li>文本</li>
<li>属性</li>
<li>或混合以上所有…</li>
</ul>
<figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bookstore</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>book</span> <span class="token attr-name">category</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CHILDREN<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Harry Potter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>author</span><span class="token punctuation">></span></span>J K. Rowling<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>author</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>year</span><span class="token punctuation">></span></span>2005<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>year</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>price</span><span class="token punctuation">></span></span>29.99<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>price</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>book</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>book</span> <span class="token attr-name">category</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>WEB<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Learning XML<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>author</span><span class="token punctuation">></span></span>Erik T. Ray<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>author</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>year</span><span class="token punctuation">></span></span>2003<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>year</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>price</span><span class="token punctuation">></span></span>39.95<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>price</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>book</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bookstore</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>在上面的实例中，<bookstore> 和 <book> 都有 元素内容，因为他们包含其他元素。<book> 元素也有属性（category=“CHILDREN”）。<title>、<author>、<year> 和 <price> 有文本内容，因为他们包含文本。</p>
<blockquote>
<p><strong>XML 命名规则</strong></p>
<p>XML 元素必须遵循以下命名规则：</p>
<ul>
<li>名称可以包含字母、数字以及其他的字符</li>
<li>名称不能以数字或者标点符号开始</li>
<li>名称不能以字母 xml（或者 XML、Xml 等等）开始</li>
<li>名称不能包含空格</li>
</ul>
<p>可使用任何名称，没有保留的字词。</p>
<p><strong>最佳命名习惯</strong></p>
<p>使名称具有描述性。使用下划线的名称也很不错：&lt;first_name&gt;、&lt;last_name&gt;。</p>
<p>名称应简短和简单，比如：&lt;book_title&gt;，而不是：&lt;the_title_of_the_book&gt;。</p>
<p>避免 “-” 字符。如果您按照这样的方式进行命名：“first-name”，一些软件会认为您想要从 first 里边减去 name。</p>
<p>避免 “.” 字符。如果您按照这样的方式进行命名：“<span class="exturl" data-url="aHR0cDovL2ZpcnN0Lm5hbWU=">first.name</span>”，一些软件会认为 “name” 是对象 “first” 的属性。</p>
<p>避免 “:” 字符。冒号会被转换为命名空间来使用（稍后介绍）。</p>
<p>XML 文档经常有一个对应的数据库，其中的字段会对应 XML 文档中的元素。有一个实用的经验，即使用数据库的命名规则来命名 XML 文档中的元素。</p>
<p>在 XML 中，éòá 等非英语字母是完全合法的，不过需要留意，您的软件供应商不支持这些字符时可能出现的问题。</p>
</blockquote>
<h2 id="xml属性"><a class="markdownIt-Anchor" href="#xml属性">#</a> XML 属性</h2>
<p>XML 元素具有属性，类似 HTML。</p>
<p>属性（Attribute）提供有关元素的额外信息。</p>
<p>在 HTML 中，属性提供有关元素的额外信息：</p>
<figure class="highlight html"><figcaption data-lang="HTML"><span>l</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>computer.gif<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>demo.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>属性通常提供不属于数据组成部分的信息。在下面的实例中，文件类型与数据无关，但是对需要处理这个元素的软件来说却很重要：</p>
<figure class="highlight html"><figcaption data-lang="HTML"><span>l</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gif<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>computer.gif<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><h1 id="tinyxml-库"><a class="markdownIt-Anchor" href="#tinyxml-库">#</a> TinyXML 库</h1>
<p>当前，对 xml 的使用非常广泛，读取和设置 xml 配置文件是最常用的操作。常见 C/C++ XML 解析器有 Tinyxml、XERCES、squashxml、xmlite、pugxml、libxml 等等，这些解析器有些是支持多语言的，有些只是单纯 C/C++ 的。</p>
<p>TinyXML 是一款基于 DOM 模型的 XML 解析器，简单易用且小巧玲珑，非常适合存储简单数据，配置文件，对象序列化等数据量不是很大的操作。这个解析库的模型通过解析 XML 文件，然后在内存中生成 DOM 模型，从而让我们很方便的遍历这棵 XML 树。</p>
<p>安装：解压缩 tinyXML 后，将这六个文件添加到 C++ 工程中，分别是 tinystr.h、tinystr.cpp、tinyxml.h、tinyxml.cpp、tinyxmlerror.cpp、tinyxmlparser.cpp。在需要操作 xml 文件的地方，使用如下代码，就可以引入 TinyXML 类库</p>
<h2 id="tinyxml类结构"><a class="markdownIt-Anchor" href="#tinyxml类结构">#</a> TinyXml 类结构</h2>
<ul>
<li>TiXmlBase：整个 TinyXML 模型的基类。</li>
<li>TiXmlAttribute：对应于 XML 中的元素的属性。</li>
<li>TiXmlNode：对应于 DOM 结构中的节点。</li>
<li>TiXmlComment：对应于 XML 中的注释</li>
<li>TiXmlDeclaration：对应于 XML 中的申明部分，即 &lt;？versiong=“1.0” ?&gt;。</li>
<li>TiXmlDocument：对应于 XML 的整个文档。</li>
<li>TiXmlElement：对应于 XML 的元素。</li>
<li>TiXmlText：对应于 XML 的文字部分</li>
<li>TiXmlUnknown：对应于 XML 的未知部分。</li>
<li>TiXmlHandler：定义了针对 XML 的一些操作。</li>
</ul>
<h2 id="tinyxml常用方法"><a class="markdownIt-Anchor" href="#tinyxml常用方法">#</a> TinyXml 常用方法</h2>
<figure class="highlight cpp"><figcaption data-lang="C++"><span>p</span></figcaption><table><tr><td data-num="1"></td><td><pre>TiXmlDocument doc<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// Loadfile 载入文件</span></pre></td></tr><tr><td data-num="4"></td><td><pre>doc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span><span class="token string">"test.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 获取根节点元素</span></pre></td></tr><tr><td data-num="7"></td><td><pre>TiXmlElement <span class="token operator">*</span>root <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 获取元素名</span></pre></td></tr><tr><td data-num="10"></td><td><pre>QString ElementName <span class="token operator">=</span> root<span class="token operator">-></span><span class="token function">Value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 判断该元素是否有子元素 返回 true 有，false 没有</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">bool</span> Children <span class="token operator">=</span> root<span class="token operator">-></span><span class="token function">NoChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre> </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 获取 root 元素下的第一个子元素</span></pre></td></tr><tr><td data-num="16"></td><td><pre>TiXmlElement <span class="token operator">*</span>child <span class="token operator">=</span> root<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">// 获取 root 元素的子元素指定元素名字</span></pre></td></tr><tr><td data-num="19"></td><td><pre>child <span class="token operator">=</span> root<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"major"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="20"></td><td><pre> </pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment">// 获取 child 元素的下一个兄弟元素</span></pre></td></tr><tr><td data-num="22"></td><td><pre>TiXmlElement <span class="token operator">*</span>brother <span class="token operator">=</span> child<span class="token operator">-></span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">// 获取 child 元素的兄弟元素指定元素名字</span></pre></td></tr><tr><td data-num="25"></td><td><pre>brother <span class="token operator">=</span> child<span class="token operator">-></span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token string">"specVersion"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">// 获取 brother 元素的值</span></pre></td></tr><tr><td data-num="28"></td><td><pre>QString text <span class="token operator">=</span> brother<span class="token operator">-></span><span class="token function">GetText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment">// 获取 brother 元素的第一个属性</span></pre></td></tr><tr><td data-num="31"></td><td><pre>TiXmlAttribute <span class="token operator">*</span>Attribute <span class="token operator">=</span> brother<span class="token operator">-></span><span class="token function">FirstAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token comment">// 获取 Attribute 属性的名字 QString </span></pre></td></tr><tr><td data-num="34"></td><td><pre>QString AttributeName <span class="token operator">=</span> Attribute<span class="token operator">-></span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment">// 获取 Attribute 属性的值</span></pre></td></tr><tr><td data-num="37"></td><td><pre>AttributeValue <span class="token operator">=</span> Attribute<span class="token operator">-></span><span class="token function">Value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token comment">// 获取 brother 的属性名为 (AttributeName) 的值</span></pre></td></tr><tr><td data-num="40"></td><td><pre>AttributeValue <span class="token operator">=</span> brother<span class="token operator">-></span><span class="token function">Attribute</span><span class="token punctuation">(</span><span class="token string">"AttributeName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token comment">// 创建一个 XML 文件</span></pre></td></tr><tr><td data-num="44"></td><td><pre>TiXmlDocument <span class="token operator">*</span>myDocument <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token comment">// 创建 xml 文件头（&lt;?xml version="1.0" encoding="UTF-8" ?>）</span></pre></td></tr><tr><td data-num="47"></td><td><pre>TiXmlDeclaration <span class="token operator">*</span>pDeclaration<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">TiXmlDeclaration</span><span class="token punctuation">(</span><span class="token string">"1.0"</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token comment">// 加入将 xml 文件头加入文档中</span></pre></td></tr><tr><td data-num="50"></td><td><pre>myDocument<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>pDeclaration<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment">// 创建一个元素节点</span></pre></td></tr><tr><td data-num="53"></td><td><pre>TiXmlElement <span class="token operator">*</span>BUSINESS<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">TiXmlElement</span><span class="token punctuation">(</span><span class="token string">"BUSINESS"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token comment">// 加入 BUSINESS 元素节点到文档中</span></pre></td></tr><tr><td data-num="56"></td><td><pre>myDocument<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>BUSINESS<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="57"></td><td><pre></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token comment">// 创建两个节点</span></pre></td></tr><tr><td data-num="59"></td><td><pre>TiXmlElement <span class="token operator">*</span>COUNTRY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlElement</span><span class="token punctuation">(</span><span class="token string">"COUNTRY"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="60"></td><td><pre>TiXmlElement <span class="token operator">*</span>PLANET <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlElement</span><span class="token punctuation">(</span><span class="token string">"PLANET"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre></pre></td></tr><tr><td data-num="62"></td><td><pre><span class="token comment">// 将新建的节点加到 BUSINESS 下一级</span></pre></td></tr><tr><td data-num="63"></td><td><pre>BUSINESS<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>PLANET<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="64"></td><td><pre>BUSINESS<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>COUNTRY<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token comment">// 添加节点内的文本</span></pre></td></tr><tr><td data-num="67"></td><td><pre>TiXmlText <span class="token operator">*</span>PLANETtxt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlText</span><span class="token punctuation">(</span><span class="token string">"one"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="68"></td><td><pre>TiXmlText <span class="token operator">*</span>COUNTRYtxt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlText</span><span class="token punctuation">(</span><span class="token string">"china"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>COUNTRY<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>COUNTRYtxt<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>PLANET<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>PLANETtxt<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre></pre></td></tr><tr><td data-num="72"></td><td><pre><span class="token comment">// 保存 xml</span></pre></td></tr><tr><td data-num="73"></td><td><pre>myDocument<span class="token operator">-></span><span class="token function">SaveFile</span><span class="token punctuation">(</span><span class="token string">"test.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="tinyxml读写xml"><a class="markdownIt-Anchor" href="#tinyxml读写xml">#</a> TinyXml 读写 xml</h2>
<figure class="highlight cpp"><figcaption data-lang="C++"><span>p</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"stdafx.h"</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Configer.h"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Windows.h></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//UTF-8 转换成 GB2312</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">U2G</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> utf8<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token function">MultiByteToWideChar</span><span class="token punctuation">(</span>CP_UTF8<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> utf8<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">wchar_t</span><span class="token operator">*</span> wstr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">wchar_t</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token function">memset</span><span class="token punctuation">(</span>wstr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token function">MultiByteToWideChar</span><span class="token punctuation">(</span>CP_UTF8<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> utf8<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> wstr<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	len <span class="token operator">=</span> <span class="token function">WideCharToMultiByte</span><span class="token punctuation">(</span>CP_ACP<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wstr<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token function">memset</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token function">WideCharToMultiByte</span><span class="token punctuation">(</span>CP_ACP<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wstr<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> str<span class="token punctuation">,</span> len<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>wstr<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>		<span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> wstr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>		wstr <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	<span class="token keyword">return</span> str<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment">//GB2312 转换成 UTF8</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">G2U</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> gb2312<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>	<span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token function">MultiByteToWideChar</span><span class="token punctuation">(</span>CP_ACP<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gb2312<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>	<span class="token keyword">wchar_t</span><span class="token operator">*</span> wstr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">wchar_t</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>	<span class="token function">memset</span><span class="token punctuation">(</span>wstr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>	<span class="token function">MultiByteToWideChar</span><span class="token punctuation">(</span>CP_ACP<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> gb2312<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> wstr<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>	len <span class="token operator">=</span> <span class="token function">WideCharToMultiByte</span><span class="token punctuation">(</span>CP_UTF8<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wstr<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>	<span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>	<span class="token function">memset</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>	<span class="token function">WideCharToMultiByte</span><span class="token punctuation">(</span>CP_UTF8<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> wstr<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> str<span class="token punctuation">,</span> len<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>wstr<span class="token punctuation">)</span> <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> wstr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>	<span class="token keyword">return</span> str<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token class-name">Configer</span><span class="token double-colon punctuation">::</span><span class="token function">Configer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token class-name">Configer</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">Configer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>std<span class="token double-colon punctuation">::</span>string <span class="token class-name">Configer</span><span class="token double-colon punctuation">::</span><span class="token function">FilePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>	std<span class="token double-colon punctuation">::</span>string strPath<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>	HMODULE hModule <span class="token operator">=</span> <span class="token function">GetModuleHandle</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 得到某一模块的句柄</span></pre></td></tr><tr><td data-num="56"></td><td><pre>	<span class="token keyword">char</span> cFilePath<span class="token punctuation">[</span>MAX_PATH<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>	<span class="token function">GetModuleFileNameA</span><span class="token punctuation">(</span>hModule<span class="token punctuation">,</span> cFilePath<span class="token punctuation">,</span> MAX_PATH<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 获得当前运行程序的绝对路径</span></pre></td></tr><tr><td data-num="58"></td><td><pre></pre></td></tr><tr><td data-num="59"></td><td><pre>	std<span class="token double-colon punctuation">::</span>string strModulFullPath <span class="token operator">=</span> cFilePath<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>	size_t npos <span class="token operator">=</span> strModulFullPath<span class="token punctuation">.</span><span class="token function">rfind</span><span class="token punctuation">(</span><span class="token string">"\\"</span><span class="token punctuation">,</span> strModulFullPath<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 查找字符串在当前字符串中最后一次出现的位置</span></pre></td></tr><tr><td data-num="61"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>npos <span class="token operator">!=</span> std<span class="token double-colon punctuation">::</span>string<span class="token double-colon punctuation">::</span>npos<span class="token punctuation">)</span>		<span class="token comment">// 如果没找到，返回一个特别的标志 c++ 中用 npos 表示，我这里 npos 取值是 4294967295，</span></pre></td></tr><tr><td data-num="62"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>		strPath <span class="token operator">=</span> strModulFullPath<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> npos<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre>	<span class="token keyword">return</span> strPath <span class="token operator">+</span> <span class="token string">"\\cfg.xml"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="68"></td><td><pre><span class="token keyword">bool</span> <span class="token class-name">Configer</span><span class="token double-colon punctuation">::</span><span class="token function">Save</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>	std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>TiXmlDocument<span class="token operator">></span> <span class="token function">doc</span><span class="token punctuation">(</span><span class="token keyword">new</span> TiXmlDocument<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 创建 XML 文档对象</span></pre></td></tr><tr><td data-num="71"></td><td><pre>	TiXmlDeclaration <span class="token operator">*</span>dec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlDeclaration</span><span class="token punctuation">(</span><span class="token string">"1.0"</span><span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 文档描述</span></pre></td></tr><tr><td data-num="72"></td><td><pre>	TiXmlElement <span class="token operator">*</span>net <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlElement</span><span class="token punctuation">(</span><span class="token string">"net"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 创建一个根节点</span></pre></td></tr><tr><td data-num="73"></td><td><pre>	doc<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>net<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 链接到文档对象下</span></pre></td></tr><tr><td data-num="74"></td><td><pre></pre></td></tr><tr><td data-num="75"></td><td><pre>	TiXmlElement <span class="token operator">*</span>tradeNet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlElement</span><span class="token punctuation">(</span><span class="token string">"TradeNet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>	net<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>tradeNet<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 链接到 net 节点下</span></pre></td></tr><tr><td data-num="77"></td><td><pre>	tradeNet<span class="token operator">-></span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"ip"</span><span class="token punctuation">,</span> <span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 设置节点属性</span></pre></td></tr><tr><td data-num="78"></td><td><pre>	tradeNet<span class="token operator">-></span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"port"</span><span class="token punctuation">,</span> <span class="token string">"18068"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre></pre></td></tr><tr><td data-num="80"></td><td><pre>	TiXmlElement <span class="token operator">*</span>quoteNet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlElement</span><span class="token punctuation">(</span><span class="token string">"QuoteNet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>	net<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>quoteNet<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>	quoteNet<span class="token operator">-></span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"ip"</span><span class="token punctuation">,</span> <span class="token string">"127.0.0.2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>	quoteNet<span class="token operator">-></span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"port"</span><span class="token punctuation">,</span> <span class="token string">"18069"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="84"></td><td><pre></pre></td></tr><tr><td data-num="85"></td><td><pre>	TiXmlElement <span class="token operator">*</span>account <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlElement</span><span class="token punctuation">(</span><span class="token string">"Account"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>	doc<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="87"></td><td><pre></pre></td></tr><tr><td data-num="88"></td><td><pre>	TiXmlElement <span class="token operator">*</span>acc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlElement</span><span class="token punctuation">(</span><span class="token string">"account"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>	account<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>acc<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>	acc<span class="token operator">-></span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"acc"</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="91"></td><td><pre></pre></td></tr><tr><td data-num="92"></td><td><pre>	TiXmlElement <span class="token operator">*</span>acc1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TiXmlElement</span><span class="token punctuation">(</span><span class="token string">"account"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>	account<span class="token operator">-></span><span class="token function">LinkEndChild</span><span class="token punctuation">(</span>acc1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>	acc1<span class="token operator">-></span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"acc"</span><span class="token punctuation">,</span> <span class="token string">"589456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="95"></td><td><pre></pre></td></tr><tr><td data-num="96"></td><td><pre>	<span class="token keyword">return</span> doc<span class="token operator">-></span><span class="token function">SaveFile</span><span class="token punctuation">(</span><span class="token function">FilePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 保存文档</span></pre></td></tr><tr><td data-num="97"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="98"></td><td><pre><span class="token keyword">bool</span> <span class="token class-name">Configer</span><span class="token double-colon punctuation">::</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="99"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>	std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>TiXmlDocument<span class="token operator">></span> <span class="token function">doc</span><span class="token punctuation">(</span><span class="token keyword">new</span> TiXmlDocument<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>doc<span class="token operator">-></span><span class="token function">LoadFile</span><span class="token punctuation">(</span><span class="token function">FilePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>		<span class="token comment">// 加载文件</span></pre></td></tr><tr><td data-num="102"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> doc<span class="token operator">-></span><span class="token function">ErrorDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="104"></td><td><pre>		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="105"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="106"></td><td><pre></pre></td></tr><tr><td data-num="107"></td><td><pre>	TiXmlElement <span class="token operator">*</span>net <span class="token operator">=</span> doc<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"Account"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 索引到节点</span></pre></td></tr><tr><td data-num="108"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>net <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="109"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="111"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>	TiXmlElement <span class="token operator">*</span>node <span class="token operator">=</span> net<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"account"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 索引到节点</span></pre></td></tr><tr><td data-num="113"></td><td><pre>	<span class="token keyword">while</span> <span class="token punctuation">(</span>node<span class="token punctuation">)</span>	<span class="token comment">// 遍历节点</span></pre></td></tr><tr><td data-num="114"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>		std<span class="token double-colon punctuation">::</span>string acc <span class="token operator">=</span> node<span class="token operator">-></span><span class="token function">Attribute</span><span class="token punctuation">(</span><span class="token string">"acc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="116"></td><td><pre>		node <span class="token operator">=</span> node<span class="token operator">-></span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 将当前节点指针指向下一个节点</span></pre></td></tr><tr><td data-num="117"></td><td><pre>		</pre></td></tr><tr><td data-num="118"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="119"></td><td><pre>	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="120"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="loadconfig源码解析"><a class="markdownIt-Anchor" href="#loadconfig源码解析">#</a> LoadConfig () 源码解析</h2>
<p>ScanConfig.cfg</p>
<figure class="highlight xml"><figcaption data-lang="XML"><span>l</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScanConfig</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token comment">&lt;!--&lt;Normal YOffset="60" ForceOffsetY="0" /> --></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XRay</span> <span class="token attr-name">SteadyTime</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CTScan</span> <span class="token attr-name">SteadyTime</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DeviceAdjust</span> <span class="token attr-name">FilamentInterval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>14400000<span class="token punctuation">"</span></span> <span class="token attr-name">CenterKVInterval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2700000<span class="token punctuation">"</span></span> <span class="token attr-name">SteadyTime</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10000<span class="token punctuation">"</span></span> <span class="token attr-name">Enable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">AdjustSteadyTime</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">&lt;!--&lt;FastScan BufferAngle="5" />--></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LensConfig</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Lens</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">Factor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.2<span class="token punctuation">"</span></span> <span class="token attr-name">MergeCount</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Lens</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">Factor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.1<span class="token punctuation">"</span></span> <span class="token attr-name">MergeCount</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Lens</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">Factor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.025<span class="token punctuation">"</span></span> <span class="token attr-name">MergeCount</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Lens</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token attr-name">Factor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.015<span class="token punctuation">"</span></span> <span class="token attr-name">MergeCount</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Lens</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span> <span class="token attr-name">Factor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.6<span class="token punctuation">"</span></span> <span class="token attr-name">MergeCount</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LensConfig</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">&lt;!--&lt;MachineOffset></pre></td></tr><tr><td data-num="15"></td><td><pre>        &lt;MicroView></pre></td></tr><tr><td data-num="16"></td><td><pre>            &lt;Position1 Value="105" Height1="300" Height1Offset="17" Height2="1500" Height2Offset="14" /></pre></td></tr><tr><td data-num="17"></td><td><pre>            &lt;Position2 Value="80" Height1="300" Height1Offset="63" Height2="1500" Height2Offset="59" /></pre></td></tr><tr><td data-num="18"></td><td><pre>        &lt;/MicroView></pre></td></tr><tr><td data-num="19"></td><td><pre>        &lt;BroadView></pre></td></tr><tr><td data-num="20"></td><td><pre>            &lt;Position1 Value="0" Height1="0" Height1Offset="0" Height2="0" Height2Offset="0" /></pre></td></tr><tr><td data-num="21"></td><td><pre>            &lt;Position2 Value="0" Height1="0" Height1Offset="0" Height2="0" Height2Offset="0" /></pre></td></tr><tr><td data-num="22"></td><td><pre>        &lt;/BroadView></pre></td></tr><tr><td data-num="23"></td><td><pre>    &lt;/MachineOffset> --></span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EvaluateTime</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MoveTime</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.591<span class="token punctuation">"</span></span> <span class="token attr-name">Reference</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1.153<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MicroView</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3.767<span class="token punctuation">"</span></span> <span class="token attr-name">Reference</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3.379<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BroadView</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.736<span class="token punctuation">"</span></span> <span class="token attr-name">Reference</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.247<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DelayTime</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.046<span class="token punctuation">"</span></span> <span class="token attr-name">Reference</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.046<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EvaluateTime</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MiscOptions</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SerialID</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>MX3000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScanFrameNum</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>180;360;720;1080;1440;1800<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SerialSteadyTime</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0;10;20;30;60<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppRegPath</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HKEY_CURRENT_USER\Software\NanoVoxelScan\NanoVoxelScan<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RecentFileNum</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FloatPrecision</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MiscOptions</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XRayRecovery</span> <span class="token attr-name">WaitXRayOn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20000<span class="token punctuation">"</span></span> <span class="token attr-name">WaitXRayOff</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SpiralScan</span> <span class="token attr-name">FrameWidth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">FrameHeight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3072<span class="token punctuation">"</span></span> <span class="token attr-name">CanRotateAll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ReconFeaturing</span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScanConfig</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>CTScanConfigDlg.cpp</p>
<figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">CTScanConfigDlg</span><span class="token double-colon punctuation">::</span><span class="token function">LoadConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 创建指向 TiXmlDocument 对象的指针 pDoc，并初始化</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    std<span class="token double-colon punctuation">::</span>auto_ptr<span class="token operator">&lt;</span>TiXmlDocument<span class="token operator">></span> <span class="token function">pDoc</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">TiXmlDocument</span><span class="token punctuation">(</span><span class="token string">"Config/ScanConfig.cfg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    pDoc<span class="token operator">-></span><span class="token function">LoadFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pDoc<span class="token operator">-></span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token comment">// 获取根节点元素 ScanConfig，存在指针 pRoot 中</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        TiXmlElement<span class="token operator">*</span> pRoot <span class="token operator">=</span> pDoc<span class="token operator">-></span><span class="token function">RootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// 获取 root 元素的子元素，指定元素名字 "EvaluateTime" 预估扫描时间</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        TiXmlElement<span class="token operator">*</span> pEvaluateTimeElem <span class="token operator">=</span> pRoot<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"EvaluateTime"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>pEvaluateTimeElem <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token comment">// 获取 EvaluateTime 元素的子元素，指定元素名字 "MoveTime"</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            TiXmlElement<span class="token operator">*</span> pMoveTimeElem <span class="token operator">=</span> pEvaluateTimeElem<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"MoveTime"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>pMoveTimeElem <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                <span class="token comment">// 查询该属性是否存在，若存在则写入 mMoveTime</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                pMoveTimeElem<span class="token operator">-></span><span class="token function">QueryFloatAttribute</span><span class="token punctuation">(</span><span class="token string">"Value"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>mMoveTime<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>            TiXmlElement<span class="token operator">*</span> pMicroViewTimeElem <span class="token operator">=</span> pEvaluateTimeElem<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"MicroView"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>pMicroViewTimeElem <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                pMicroViewTimeElem<span class="token operator">-></span><span class="token function">QueryFloatAttribute</span><span class="token punctuation">(</span><span class="token string">"Value"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>mMicroViewTime<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>            TiXmlElement<span class="token operator">*</span> pBroadViewTimeElem <span class="token operator">=</span> pEvaluateTimeElem<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"BroadView"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>pBroadViewTimeElem <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>                pBroadViewTimeElem<span class="token operator">-></span><span class="token function">QueryFloatAttribute</span><span class="token punctuation">(</span><span class="token string">"Value"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>mBroadViewTime<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>            TiXmlElement<span class="token operator">*</span> pDelayTimeElem <span class="token operator">=</span> pEvaluateTimeElem<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"DelayTime"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>pDelayTimeElem <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                pDelayTimeElem<span class="token operator">-></span><span class="token function">QueryFloatAttribute</span><span class="token punctuation">(</span><span class="token string">"Value"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>mDelayTime<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>		<span class="token comment">// 获取 root 元素的子元素，指定元素名字 "MiscOptions" 杂项</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        TiXmlElement<span class="token operator">*</span> pMiscOptionsElem <span class="token operator">=</span> pRoot<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"MiscOptions"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>pMiscOptionsElem <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token comment">// 读取扫描帧数</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            TiXmlElement<span class="token operator">*</span> pScanFrameNumElem <span class="token operator">=</span> pMiscOptionsElem<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"ScanFrameNum"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>pScanFrameNumElem <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>                std<span class="token double-colon punctuation">::</span>string frame_count<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>                pScanFrameNumElem<span class="token operator">-></span><span class="token function">QueryStringAttribute</span><span class="token punctuation">(</span><span class="token string">"Value"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>frame_count<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                </pre></td></tr><tr><td data-num="45"></td><td><pre>                std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">></span> stringVec<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>                <span class="token class-name">Utility</span><span class="token double-colon punctuation">::</span><span class="token function">StringSplit</span><span class="token punctuation">(</span>frame_count<span class="token punctuation">,</span> <span class="token string">";"</span><span class="token punctuation">,</span> stringVec<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre>                mFrameCount<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>                <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> stringVec<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>                    mFrameCount<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">atoi</span><span class="token punctuation">(</span>stringVec<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre>			<span class="token comment">// 读取射线源稳定时间</span></pre></td></tr><tr><td data-num="55"></td><td><pre>			TiXmlElement<span class="token operator">*</span> pSerialSteadyTimeElem <span class="token operator">=</span> pMiscOptionsElem<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"SerialSteadyTime"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>			<span class="token keyword">if</span><span class="token punctuation">(</span>pSerialSteadyTimeElem <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="57"></td><td><pre>			<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>				std<span class="token double-colon punctuation">::</span>string steadyTime<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>				pSerialSteadyTimeElem<span class="token operator">-></span><span class="token function">QueryStringAttribute</span><span class="token punctuation">(</span><span class="token string">"Value"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>steadyTime<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre></pre></td></tr><tr><td data-num="61"></td><td><pre>				std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">></span> stringVec<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>				<span class="token class-name">Utility</span><span class="token double-colon punctuation">::</span><span class="token function">StringSplit</span><span class="token punctuation">(</span>steadyTime<span class="token punctuation">,</span> <span class="token string">";"</span><span class="token punctuation">,</span> stringVec<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre></pre></td></tr><tr><td data-num="64"></td><td><pre>				mSerialSteadyTime<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>				<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> stringVec<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>					mSerialSteadyTime<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">atoi</span><span class="token punctuation">(</span>stringVec<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>				<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>			<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="70"></td><td><pre></pre></td></tr><tr><td data-num="71"></td><td><pre>		<span class="token comment">//CT 扫描是否有重建功能</span></pre></td></tr><tr><td data-num="72"></td><td><pre>		TiXmlElement<span class="token operator">*</span> pReconFeaturing <span class="token operator">=</span> pRoot<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"ReconFeaturing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>		<span class="token keyword">if</span><span class="token punctuation">(</span>pReconFeaturing <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="74"></td><td><pre>		<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>			pReconFeaturing<span class="token operator">-></span><span class="token function">QueryBoolAttribute</span><span class="token punctuation">(</span><span class="token string">"Value"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>mbReconFeaturing<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="77"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>        <span class="token class-name">HPCDumper</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">"Read ScanConfig.cfg config failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="80"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="加载多条同一元素数据"><a class="markdownIt-Anchor" href="#加载多条同一元素数据">#</a> 加载多条同一元素数据</h2>
<p>motorhomestep.cfg</p>
<figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MotorHomeStep</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Step</span> <span class="token attr-name">Type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">Actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0;1;3;6;7<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Step</span> <span class="token attr-name">Type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">Actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Step</span> <span class="token attr-name">Type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span> <span class="token attr-name">Actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0;1;6;3;7;8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Step</span> <span class="token attr-name">Type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token attr-name">Actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6:198<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Step</span> <span class="token attr-name">Type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span> <span class="token attr-name">Actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MotorHomeStep</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>TiXml 加载数据</p>
<figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 加载回零操作的配置文件</span></pre></td></tr><tr><td data-num="2"></td><td><pre>std<span class="token double-colon punctuation">::</span>auto_ptr<span class="token operator">&lt;</span>TiXmlDocument<span class="token operator">></span> <span class="token function">pDoc</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">TiXmlDocument</span><span class="token punctuation">(</span><span class="token string">"Config/MotorHomeStep.cfg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>pDoc<span class="token operator">-></span><span class="token function">LoadFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pDoc<span class="token operator">-></span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// typedef std::vector&lt;StepPtr>  StepSequence;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// StepSequence    mMotorHomeSeq;   // 回零动作序列</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    mMotorHomeSeq<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    TiXmlElement<span class="token operator">*</span> pRoot <span class="token operator">=</span> pDoc<span class="token operator">-></span><span class="token function">RootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    TiXmlElement<span class="token operator">*</span> pStepElem <span class="token operator">=</span> pRoot<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"Step"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span>pStepElem <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">int</span> type <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        std<span class="token double-colon punctuation">::</span>string actions<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        pStepElem<span class="token operator">-></span><span class="token function">QueryIntAttribute</span><span class="token punctuation">(</span><span class="token string">"Type"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        pStepElem<span class="token operator">-></span><span class="token function">QueryStringAttribute</span><span class="token punctuation">(</span><span class="token string">"Actions"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>actions<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        mMotorHomeSeq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">StepPtr</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">Step</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> actions<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        pStepElem <span class="token operator">=</span> pStepElem<span class="token operator">-></span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul>
<li><code>pStepElem = pRoot-&gt;FirstChildElement()</code>  读取第一条 step 元素</li>
<li><code>pStepElem = pStepElem-&gt;NextSiblingElement()</code>  读取下一条 step 元素</li>
</ul>
<h1 id="逐条读取配置到map里"><a class="markdownIt-Anchor" href="#逐条读取配置到map里">#</a> 逐条读取配置到 map 里</h1>
<figure class="highlight cpp"><figcaption data-lang="C++"><span>p</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">FilterConfig</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">int</span> ID<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	CString name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">double</span> offset<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">bool</span> isFiltersActive<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>std<span class="token double-colon punctuation">::</span>map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> FilterConfig<span class="token operator">></span> mFiltersMap<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>std<span class="token double-colon punctuation">::</span>auto_ptr<span class="token operator">&lt;</span>TiXmlDocument<span class="token operator">></span> <span class="token function">pDoc</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">TiXmlDocument</span><span class="token punctuation">(</span><span class="token string">"Config/DeviceConfig.cfg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>pDoc<span class="token operator">-></span><span class="token function">LoadFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pDoc<span class="token operator">-></span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    mLensConfigMap<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    TiXmlElement<span class="token operator">*</span> pRoot <span class="token operator">=</span> pDoc<span class="token operator">-></span><span class="token function">RootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    TiXmlElement<span class="token operator">*</span> pFiltersElem <span class="token operator">=</span> pRoot<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"Filters"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    pFiltersElem<span class="token operator">-></span><span class="token function">QueryBoolAttribute</span><span class="token punctuation">(</span><span class="token string">"Active"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>isFiltersActive<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span> isFiltersActive <span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		TiXmlElement<span class="token operator">*</span> pFilterElem <span class="token operator">=</span> pFiltersElem<span class="token operator">-></span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"Elem"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		<span class="token keyword">for</span> <span class="token punctuation">(</span>  <span class="token punctuation">;</span> pFilterElem <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>  <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>			FilterConfig filterConfig<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>			std<span class="token double-colon punctuation">::</span>string fname<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>			pFilterElem<span class="token operator">-></span><span class="token function">QueryIntAttribute</span><span class="token punctuation">(</span><span class="token string">"ID"</span><span class="token punctuation">,</span>			<span class="token operator">&amp;</span>filterConfig<span class="token punctuation">.</span>ID<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>			pFilterElem<span class="token operator">-></span><span class="token function">QueryStringAttribute</span><span class="token punctuation">(</span><span class="token string">"Name"</span><span class="token punctuation">,</span>		<span class="token operator">&amp;</span>fname<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>			filterConfig<span class="token punctuation">.</span>name <span class="token operator">=</span> fname<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>			pFilterElem<span class="token operator">-></span><span class="token function">QueryDoubleAttribute</span><span class="token punctuation">(</span><span class="token string">"Offset"</span><span class="token punctuation">,</span>		<span class="token operator">&amp;</span>filterConfig<span class="token punctuation">.</span>offset<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>			mFiltersMap<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">pair</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> FilterConfig<span class="token operator">></span></span></span><span class="token punctuation">(</span>filterConfig<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> filterConfig<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>			pFilterElem <span class="token operator">=</span> pFilterElem<span class="token operator">-></span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="xml-javascript"><a class="markdownIt-Anchor" href="#xml-javascript">#</a> XML JavaScript</h1>
<h1 id="xml进阶"><a class="markdownIt-Anchor" href="#xml进阶">#</a> XML 进阶</h1>

      <div class="tags">
          <a href="/tags/C/" rel="tag"><i class="ic i-tag"></i> C++</a>
          <a href="/tags/XML/" rel="tag"><i class="ic i-tag"></i> XML</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">更新于</span>
    <time title="修改时间：2023-06-12 17:20:40" itemprop="dateModified" datetime="2023-06-12T17:20:40+08:00">2023-06-12</time>
  </span>
  <span id="2023/05/29/XML/" class="item leancloud_visitors" data-flag-title="XML & TinyXML" title="阅读次数">
      <span class="icon">
        <i class="ic i-eye"></i>
      </span>
      <span class="text">阅读次数</span>
      <span class="leancloud-visitors-count"></span>
      <span class="text">次</span>
  </span>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>本文作者： </strong>AdventureYX <i class="ic i-at"><em>@</em></i>
  </li>
  <li class="link">
    <strong>本文链接：</strong>
    <a href="https://adventure-yx.github.io/2023/05/29/XML/" title="XML &amp; TinyXML">https://adventure-yx.github.io/2023/05/29/XML/</a>
  </li>
  <li class="license">
    <strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC96aC1DTg=="><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2023/05/26/MFC%E6%B6%88%E6%81%AF%E6%98%A0%E5%B0%84%E6%9C%BA%E5%88%B6/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;img.picgo.net&#x2F;2023&#x2F;04&#x2F;02&#x2F;sky-99681dcf7dddeea33.jpeg" title="MFC 消息映射机制">
  <span class="type">上一篇</span>
  <span class="category"><i class="ic i-flag"></i> C++</span>
  <h3>MFC 消息映射机制</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2023/06/01/MFC%E5%AF%B9%E8%AF%9D%E6%A1%86/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;img.picgo.net&#x2F;2023&#x2F;04&#x2F;02&#x2F;sky-3b2f6d510326b07dd.jpeg" title="MFC 对话框">
  <span class="type">下一篇</span>
  <span class="category"><i class="ic i-flag"></i> C++</span>
  <h3>MFC 对话框</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="文章目录">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#tixml%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text"> TiXML 打开文件失败解决办法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#xml"><span class="toc-number">2.</span> <span class="toc-text"> XML</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#xml%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.</span> <span class="toc-text"> XML 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xml%E7%94%A8%E9%80%94"><span class="toc-number">2.2.</span> <span class="toc-text"> XML 用途</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xml%E8%AF%AD%E6%B3%95"><span class="toc-number">2.3.</span> <span class="toc-text"> XML 语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xml%E5%85%83%E7%B4%A0"><span class="toc-number">2.4.</span> <span class="toc-text"> XML 元素</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="系列文章">
        <ul>
          <li class="active"><a href="/2023/05/29/XML/" rel="bookmark" title="XML & TinyXML">XML & TinyXML</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="站点概览">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="AdventureYX"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">AdventureYX</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">28</span>
        <span class="name">文章</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">5</span>
        <span class="name">分类</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">13</span>
        <span class="name">标签</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FkdmVudHVyZS15eA==" title="https:&#x2F;&#x2F;github.com&#x2F;Adventure-yx"><i class="ic i-github"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>首页</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>关于</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a>
  </li>

    
  <li class="item">
    <a href="/links/" rel="section"><i class="ic i-magic"></i>links</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2023/05/26/MFC%E6%B6%88%E6%81%AF%E6%98%A0%E5%B0%84%E6%9C%BA%E5%88%B6/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2023/06/01/MFC%E5%AF%B9%E8%AF%9D%E6%A1%86/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>随机文章</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Qt/" title="分类于 Qt">Qt</a>
</div>

    <span><a href="/2023/04/20/qtchat/" title="基于Qt框架实现网络聊天室">基于Qt框架实现网络聊天室</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/C/" title="分类于 C++">C++</a>
</div>

    <span><a href="/2023/06/09/MFC%E5%B8%B8%E7%94%A8%E7%B1%BB/" title="MFC 常用类">MFC 常用类</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Qt/" title="分类于 Qt">Qt</a>
</div>

    <span><a href="/2023/05/04/showimg/" title="基于Qt的图片浏览器">基于Qt的图片浏览器</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Qt/" title="分类于 Qt">Qt</a>
</div>

    <span><a href="/2023/03/26/QML&QtQuick/" title="QML &amp; Qt Quick">QML & Qt Quick</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/C/" title="分类于 C++">C++</a>
</div>

    <span><a href="/2023/03/10/STL/" title="STL">STL</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/C/" title="分类于 C++">C++</a>
</div>

    <span><a href="/2023/03/20/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="设计模式">设计模式</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/C/" title="分类于 C++">C++</a>
</div>

    <span><a href="/2023/04/02/C++11/" title="C++11&#x2F;14&#x2F;17">C++11/14/17</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/C/" title="分类于 C++">C++</a>
</div>

    <span><a href="/2023/06/01/MFC%E5%AF%B9%E8%AF%9D%E6%A1%86/" title="MFC 对话框">MFC 对话框</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Linux/" title="分类于 Linux">Linux</a>
</div>

    <span><a href="/2023/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88%E5%8D%97%E5%A4%A72023%EF%BC%89/" title="操作系统（南大2023）">操作系统（南大2023）</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/DataBase/" title="分类于 DataBase">DataBase</a>
</div>

    <span><a href="/2023/03/06/CMU15-445%20Project0/" title="CMU15-445 Project#0 字典树trie">CMU15-445 Project#0 字典树trie</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>最新评论</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2022 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">AdventureYX @ Adventure</span>
  </div>
  <div class="powered-by">
    基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2023/05/29/XML/',
    favicon: {
      show: "（●´3｀●）やれやれだぜ",
      hide: "(´Д｀)大変だ！"
    },
    search : {
      placeholder: "文章搜索",
      empty: "关于 「 ${query} 」，什么也没搜到",
      stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: true,fancybox: true,
    copyright: '复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
